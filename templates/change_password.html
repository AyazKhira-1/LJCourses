{% extends 'base.html' %}

{% block title %}LJCourses - Change Password{% endblock %}

{% block extra_css %}
<link href="{{ url_for('static', filename='css/signup.css' ) }}" rel="stylesheet" />
{% endblock %}

{% block body_class %}min-vh-100 d-flex flex-column{% endblock %}

{% block navbar %}
<nav class="navbar border-bottom">
    <div class="container-xl">
        <a class="navbar-brand d-flex align-items-center gap-1" href="{{ url_for('course.browse_courses') }}">
            <span class="material-icons text-primary-custom fs-2">school</span>
            <span>LJCourses</span>
        </a>

        <div class="d-flex align-items-center gap-3">
            <button aria-label="Toggle Theme" onclick="toggleDarkMode()" class="btn btn-link text-secondary p-2">
                <span class="material-icons icon-dark-mode">wb_sunny</span>
                <span class="material-icons icon-light-mode">nightlight</span>
            </button>

            <div class="vr d-none d-sm-block align-self-center" style="height: 1.5rem;"></div>

            <span class="text-secondary d-none d-sm-inline small">Secure your account</span>

            <a class="btn btn-outline-secondary-custom" href="{{ url_for('student.settings') }}">Back to Settings</a>
        </div>
    </div>
</nav>
{% endblock %}

{% block content %}
<main class="flex-grow-1 d-flex align-items-center justify-content-center py-4 py-lg-5 px-3">
    <div class="card border-0 shadow-lg rounded-4 overflow-hidden w-100" style="max-width: 75rem; min-height: 570px;">
        <div class="row g-0 h-100">

            <!-- Left Panel - Hero Section -->
            <div
                class="col-lg-6 bg-gradient-primary text-white p-4 p-lg-5 d-flex flex-column justify-content-between position-relative overflow-hidden">

                <!-- Decorative Blobs -->
                <div class="blob-decoration blob-blue-hero"></div>
                <div class="blob-decoration blob-purple-hero"></div>

                <div class="position-relative" style="z-index: 10;">
                    <!-- Badge -->
                    <div class="d-inline-flex align-items-center gap-2 px-3 py-2 rounded-pill glass-badge mb-4">
                        <span class="material-icons" style="font-size: 0.875rem;">vpn_key</span>
                        <span class="text-uppercase small fw-medium"
                            style="letter-spacing: 0.05em; font-size: 0.75rem;">Security Update</span>
                    </div>

                    <!-- Heading -->
                    <h1 class="display-4 fw-bold lh-sm mb-4">
                        Update Your <br />Password
                    </h1>

                    <!-- Description -->
                    <p class="lead opacity-75 mb-0" style="max-width: 28rem;">
                        Keep your account secure by regularly updating your password. Use a strong password that you
                        don't use elsewhere.
                    </p>
                </div>

                <!-- Security Tips -->
                <div class="position-relative mt-5 mt-lg-0" style="z-index: 10;">
                    <div class="d-flex flex-column gap-3">
                        <div class="d-flex align-items-center gap-3">
                            <div class="p-2 rounded-circle bg-white bg-opacity-25 d-flex align-items-center justify-content-center"
                                style="width: 3rem; height: 3rem;">
                                <span class="material-icons" style="font-size: 1.5rem;">shield</span>
                            </div>
                            <div>
                                <p class="fw-semibold mb-0">Strong Password</p>
                                <p class="small opacity-75 mb-0">Use 8+ characters with mixed case</p>
                            </div>
                        </div>
                        <div class="d-flex align-items-center gap-3">
                            <div class="p-2 rounded-circle bg-white bg-opacity-25 d-flex align-items-center justify-content-center"
                                style="width: 3rem; height: 3rem;">
                                <span class="material-icons" style="font-size: 1.5rem;">lock</span>
                            </div>
                            <div>
                                <p class="fw-semibold mb-0">Unique Password</p>
                                <p class="small opacity-75 mb-0">Don't reuse passwords</p>
                            </div>
                        </div>
                        <div class="d-flex align-items-center gap-3">
                            <div class="p-2 rounded-circle bg-white bg-opacity-25 d-flex align-items-center justify-content-center"
                                style="width: 3rem; height: 3rem;">
                                <span class="material-icons" style="font-size: 1.5rem;">update</span>
                            </div>
                            <div>
                                <p class="fw-semibold mb-0">Regular Updates</p>
                                <p class="small opacity-75 mb-0">Change it periodically</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Panel - Change Password Form -->
            <div class="col-lg-6 p-4 p-lg-5">
                <div class="mx-auto" style="max-width: 28rem;">
                    <h2 class="fw-bold mb-2">Change your password</h2>
                    <p class="text-secondary mb-4">Enter your email and new password to update your account.</p>

                    <!-- Change Password Form -->
                    <form id="password-reset-form" class="d-flex flex-column gap-3">
                        <!-- Email Address -->
                        <div>
                            <label class="form-label small fw-medium" for="email">Email Address</label>
                            <div class="position-relative">
                                <input class="form-control form-control-signup" id="email" name="email"
                                    placeholder="enrollmentnumber@mail.ljku.edu.in" type="email" required />
                                <span class="material-icons form-icon-right" style="font-size: 1.125rem;">email</span>
                            </div>
                        </div>

                        <!-- New Password -->
                        <div>
                            <label class="form-label small fw-medium" for="new-password">New Password</label>
                            <div class="position-relative">
                                <input class="form-control form-control-signup" id="new-password" name="new_password"
                                    placeholder="Enter your new password" type="password" required />
                                <span class="material-icons form-icon-right clickable" style="font-size: 1.125rem;"
                                    data-target="new-password">visibility_off</span>
                            </div>
                        </div>

                        <!-- Confirm Password -->
                        <div>
                            <label class="form-label small fw-medium" for="confirm-password">Confirm
                                Password</label>
                            <div class="position-relative">
                                <input class="form-control form-control-signup" id="confirm-password"
                                    name="confirm_password" placeholder="Confirm your new password" type="password"
                                    required />
                                <span class="material-icons form-icon-right clickable" style="font-size: 1.125rem;"
                                    data-target="confirm-password">visibility_off</span>
                            </div>
                        </div>

                        <!-- Password Requirements -->
                        <div class="bg-light p-3 rounded small">
                            <p class="fw-semibold mb-2 text-secondary">Password Requirements:</p>
                            <ul class="mb-0 ps-3 text-secondary">
                                <li>At least 8 characters long</li>
                                <li>Include uppercase and lowercase letters</li>
                                <li>Include at least one number</li>
                                <li>Include at least one special character</li>
                            </ul>
                        </div>

                        <!-- Submit Button -->
                        <div class="mt-2">
                            <button class="btn btn-primary w-100 py-3 fw-semibold shadow-sm" type="submit">
                                Update Password
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</main>
{% endblock %}

{% block footer %}{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/password_reset.js' ) }}"></script>
{% endblock %}